# robot defintion file for running automated tests
#
dummy:
  buses:
    busA:
      class: ShareableFileBus
      port: /tmp/busA.log

    busB:
      class: ShareableFileBus
      port: /tmp/busB.log
      auto: False

  devices:
    - name: d01
      class: BaseDevice
      bus: busA
      id: 1
      model: DUMMY

    - name: d02
      class: BaseDevice
      bus: busA
      id: 2
      model: DUMMY
      auto: False

      # this is not in syncs
    - name: d03
      class: BaseDevice
      bus: busA
      id: 3
      model: DUMMY

    - name: d04
      class: BaseDevice
      bus: busB
      id: 4
      model: DUMMY

  joints:
    - name: pan
      class: JointPVL
      device: d01
      pos_read: current_pos
      pos_write: desired_pos
      vel_read: current_speed
      vel_write: desired_speed
      load_read: current_load
      load_write: desired_load
      activate: enable_device
      min: -30.0
      max: 30.0

    - name: tilt
      class: JointPVL
      device: d02
      pos_read: current_pos
      pos_write: desired_pos
      vel_read: current_speed
      vel_write: desired_speed
      load_read: current_load
      load_write: desired_load
      inverse: True
      activate: enable_device
      offset: 45.0
      auto: False

  groups:
    - name: devices
      devices: [d01, d02]

    - name: joints
      joints: [pan, tilt]

    - name: all
      groups: [devices, joints]

  syncs:
    - name: read
      class: BaseReadSync
      frequency: 100.0
      group: devices
      registers: ['current_pos', 'current_speed', 'current_load']
      # we specifically want the loops not to start automatically
      # to control the test and make sure that they are no side
      # effects on more simple checks

    - name: write
      class: BaseWriteSync
      frequency: 100.0
      group: devices
      registers: ['desired_pos', 'desired_speed', 'desired_load']
      # to speed up testing
      review: 0.2
      auto: False
      # we specifically want the loops not to start automatically
      # to control the test and make sure that they are no side
      # effects on more simple checks